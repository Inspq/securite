FROM elfelip/openamtomcatjeeagent:3.5.0

ENV JDK_VERSION_MAJ 1
ENV JDK_VERSION_MIN 8
ENV JDK_VERSION_PATCH 0
ENV JDK_VERSION_UPDATE 121
ENV JAVA_BASE /opt
ENV JAVA_HOME $JAVA_BASE/jdk${JDK_VERSION_MAJ}.${JDK_VERSION_MIN}.${JDK_VERSION_PATCH}_${JDK_VERSION_UPDATE}

ENV CATALINA_HOME /opt/tomcat
ENV CATALINA_OPTS "-server -XX:MaxPermSize=256m -Xmx1024m"
ENV PATH $CATALINA_HOME/bin:$PATH

ARG APP_VERSION=0.0.1-SNAPSHOT
ADD target/sx5-java-UI-${APP_VERSION}.war $CATALINA_HOME/webapps/sx5-java-UI.war

EXPOSE 8080 8009

CMD ["/tmp/configAgent.sh"]
